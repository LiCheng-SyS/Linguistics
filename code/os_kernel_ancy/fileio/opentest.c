#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<fcntl.h>
#include<string.h>
#include<pthread.h>
#include <sys/types.h>
#include <errno.h>

int main(int argc,char *argv[]){
    if(argc < 2 ){
        printf(" cmd filename\n");
        return -1;
    }

    int fd= open(argv[1],O_RDONLY );
    if(!fd){
        perror("OPEN FAIL\n");
        return -1;
    }else{
        printf("succ%d\n",fd);
    }

    char buffer[20];//一个字节一个字节的读读上来
    ssize_t n; // 读了几个字节上来
    int i;
    n=  read(fd,buffer,10);//参数1文件描述符,buffer,读的 数量
    printf("read 1  %d byte\n",n);

    for(i=0;i<n;i++){
        printf("%c",buffer[i]);
    }
    n=  read(fd,buffer,10);//参数1文件描述符,buffer,读的 数量
    printf("read 2  %d byte\n",n);
    for(i=0;i<n;i++){
        printf("%c",buffer[i]);
    }
    printf("\n");
    n=  read(fd,buffer,10);//参数1文件描述符,buffer,读的 数量
    for(i=0;i<n;i++){
        printf("%c",buffer[i]);
    }
    printf("\n");
    printf("\n");
    close(fd);
    return 0;
}
